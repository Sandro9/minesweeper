import{a as Q,b as $}from"./chunk-MBUDMCZA.js";import{$ as b,A as V,B as q,D as G,F as I,H as r,K as H,M as x,N as O,P as h,Q as B,R as P,S as j,T as c,U as p,V as m,W,X as D,Y as a,Z as y,aa as u,ba as f,ca as d,d as A,e as _,ea as v,fa as z,ga as M,ha as F,i as N,ja as T,m as E,ma as L,na as J,pa as K,q as U,t as w,u as C,x as S}from"./chunk-LJMMMWJ7.js";var X=(()=>{class e{transform(n,...t){if(typeof n>"u")return 0;let i=Math.floor(n/1e3),o=i%60,l=Math.floor(i/60)%60,k=Math.floor(i/3600),g=k>0?`${k}:`:"",te=l>0?`${l}:`:"0:",ne=o<10?`0${o}`:`${o}`;return g+te+ne}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275pipe=S({name:"appTime",type:e,pure:!0,standalone:!0})}}return e})();var Y=(()=>{class e{constructor(){this.gameOver=new _(!1),this.gameWon=new _(!1),this.minesCount=new _(0),this.timeMS=new _(0),this.gameMetadata=new _(null),this.timerReset=new A}startRound(){this.timerReset.next(!0),this.startRoundTimer()}startRoundTimer(){console.log("Starting timer..."),N(1e3).pipe(E(this.timerReset)).subscribe(n=>{this.timeMS.next(n*1e3)})}endRound(){this.timerReset.next(!0)}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ie=e=>({"opacity-50":e}),Fe=(()=>{class e{constructor(){this.playground=I.required(),this.isFlagModeActive=H(!1),this.appComponent=w(Z),this._gameState=w(Y),this._destroyRef=w(G),this.minesCount=$(this._gameState.minesCount),this.time=$(this._gameState.timeMS)}ngOnInit(){this.playground().flagModeActive$.pipe(Q(this._destroyRef)).subscribe(n=>{this.isFlagModeActive.set(n)})}toggleFlagMode(){this.playground().toggleFlagMode()}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-info-bar"]],inputs:{playground:[1,"playground"]},standalone:!0,features:[v],decls:9,vars:7,consts:[[1,"border-1","border-solid","shadow-md","rounded","py-3","px-8","buttonBackground","text-gray-200","text-2xl","font-semibold"],[1,"ml-auto","mr-4","py-2","px-6","rounded","buttonBackground","text-gray-200","text-2xl","flex","flex-row","gap-2","items-center","justify-center",3,"click","ngClass"],["src","assets/flag.png",1,"w-6","h-6"],[1,"border-1","border-solid","shadow-md","rounded","py-2","px-6","buttonBackground","text-gray-200","text-2xl","font-semibold","flex","flex-row","gap-2","items-center","justify-center"],["src","assets/bomb.png",1,"w-6","h-6"]],template:function(t,i){t&1&&(c(0,"div",0),y(1),M(2,"appTime"),p(),c(3,"button",1),D("click",function(){return i.toggleFlagMode()}),m(4,"img",2),y(5,` Flag
`),p(),c(6,"div",3),m(7,"img",4),y(8),p()),t&2&&(r(),b(" ",F(2,3,i.time())," "),r(2),O("ngClass",z(5,ie,i.isFlagModeActive())),r(5),b(" ",i.minesCount(),`
`))},dependencies:[X,L],styles:["[_nghost-%COMP%]{display:block;display:flex;justify-content:space-between}.buttonBackground[_ngcontent-%COMP%]{background-color:#d9683c}"],changeDetection:0})}}return e})();var ee=(()=>{class e{transform(n){return Array(n).fill(n)}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275pipe=S({name:"range",type:e,pure:!0,standalone:!0})}}return e})();function oe(e,s){e&1&&m(0,"img",4)}function re(e,s){if(e&1&&y(0),e&2){a(2);let n=d(0);b(" ",n," ")}}function ae(e,s){e&1&&m(0,"img",5)}function se(e,s){if(e&1&&x(0,ae,1,0,"img",5),e&2){a(2);let n=d(2);h(n?0:-1)}}function le(e,s){if(e&1&&x(0,re,1,1)(1,se,1,1),e&2){a(2);let n=d(2);h(n.value>0?0:1)}}function de(e,s){if(e&1){let n=W();u(0)(1)(2)(3),c(4,"div",3),D("click",function(){V(n),a();let i=d(1),o=a(3);return q(o.fieldInteraction(i))}),x(5,oe,1,0,"img",4)(6,le,2,1),p()}if(e&2){a();let n=d(1),t=d(2),i=a(3);f(t.value);let o=t.isFlagged;r(2),f(t.isMine);let l=t.isRevealed;r(2),O("ngClass",i.getStatusColor(n)),r(),h(o&&!l?5:l?6:-1)}}function ce(e,s){if(e&1&&(u(0)(1)(2),x(3,de,7,4,"div",2)),e&2){let n=s.$index;a();let t=d(0),i=n;r();let o=f(t+"-"+i);r();let l=f(a(2).getNodeInformation(o));r(),h(l!==null?3:-1)}}function pe(e,s){if(e&1&&(u(0),c(1,"div",1),P(2,ce,4,3,null,null,B),p()),e&2){let n=s.$index;a();let t=d(1);f(n),r(2),j(t)}}function me(e,s){if(e&1&&(c(0,"div",0),u(1),M(2,"range"),u(3),M(4,"range"),P(5,pe,4,1,"div",1,B),p()),e&2){let n=a();r(),f(F(2,0,n.height()));let t=F(4,3,n.width());r(4),j(t)}}var Le=(()=>{class e{constructor(){this.playground=I.required(),this.width=T(()=>this.playground()?.meta.dimensions.width??0),this.height=T(()=>this.playground()?.meta.dimensions.height??0),this.graph=T(()=>this.playground()?.grid.getGraph())}getNodeInformation(n){let t=this.graph()?.getNodeById(n);return t?{type:t.type,isRevealed:t.getIsRevealed(),isFlagged:t.getIsFlagged(),value:t.type==="field"?t.value:0,isMine:t.type==="mine"}:null}getStatusColor(n){let t="bg-slate-500",i="bg-red-500",o=this.graph()?.getNodeById(n);if(!o||!o.getIsRevealed())return t;if(o.type==="mine")return i;let g=o.value;return g===1?["text-orange-300","bg-orange-600"]:g===2?["text-yellow-300","bg-yellow-600"]:g===3?["text-blue-300","bg-blue-600"]:g>=4?["text-fuchsia-300","bg-fuchsia-600"]:"bg-slate-700"}fieldInteraction(n){this.playground()?.fieldInteraction(n)}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-domrenderer"]],inputs:{playground:[1,"playground"]},standalone:!0,features:[v],decls:3,vars:1,consts:[[1,"flex","flex-col","gap-1"],[1,"flex","flex-row","gap-1"],[1,"h-9","w-9","flex","items-center","justify-center","text-3xl","cursor-pointer","rounded-lg",3,"ngClass"],[1,"h-9","w-9","flex","items-center","justify-center","text-3xl","cursor-pointer","rounded-lg",3,"click","ngClass"],["src","assets/flag.png"],["src","assets/bomb.png"]],template:function(t,i){if(t&1&&(u(0)(1),x(2,me,7,5,"div",0)),t&2){let o=i.playground(),l=i.graph();r(2),h(o!==null&&l!==null?2:-1)}},dependencies:[ee,L],styles:["[_nghost-%COMP%]{display:flex;justify-content:center}"],changeDetection:0})}}return e})();var Z=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-root"]],standalone:!0,features:[v],decls:3,vars:0,consts:[["src","assets/mine.png",1,"absolute","bottom-10","right-12","w-64","h-64","rotate-12","max-sm:hidden"],["src","assets/bomb.png",1,"absolute","bottom-10","left-12","w-40","h-40","rotate-12","max-sm:hidden"]],template:function(t,i){t&1&&m(0,"router-outlet")(1,"img",0)(2,"img",1)},dependencies:[J,K],styles:['@charset "UTF-8";[_nghost-%COMP%]{position:relative;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}@keyframes _ngcontent-%COMP%_breath{0%{transform:scale(1) rotate(12deg)}50%{transform:scale(1.1) rotate(12deg)}to{transform:scale(1) rotate(12deg)}}img[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_breath 4s ease-in-out infinite}']})}}return e})();export{Y as a,Le as b,Z as c,X as d,Fe as e};
